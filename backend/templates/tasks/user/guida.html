{% extends 'base/user_base.html' %}
{% load static %}
{% block content %}
<div class="guida-page">

    <!-- Bottone per tornare in alto con icona Lucide -->
    <button id="scrollTopBtn" title="Torna su">
        <i data-lucide="arrow-up"></i>
    </button>

    <!-- Indice cliccabile -->
    <section class="guida-blocco">
        <h2>📘 Guida all'app ToDo</h2>
        <p>Benvenuto! Usa l'indice qui sotto per navigare la guida:</p>
        <ul>
            <li>🎯 <a href="#tour">Tour interattivo</a></li>
            <li>💎 <a href="#cosetodo">Cos'è ToDo</a></li>
            <li>🚀 <a href="#comeusarla">Come usare tutte le funzionalità</a></li>
            <li>📅 <a href="#calendario">Il calendario</a></li>
            <li>🛠 <a href="#funzioni">Funzionalità principali</a></li>
            <li>🔐 <a href="#sicurezza">Sicurezza</a></li>
            <li>📱 <a href="#dispositivi">Accessibilità</a></li>
            <li>📬 <a href="#supporto">Supporto</a></li>
            <li>🧱 <a href="#profilo">Profilo utente</a></li>
            <li>🔵 <a href="#online">Area Online e Amicizie</a></li>
            <li>👥 <a href="#team">Team e collaborazione</a></li>
            <li>📊 <a href="#adminteam">Dashboard Team Admin</a></li>
            <li>🧩 <a href="#prossime">Prossime funzionalità</a></li>
            <li>❓ <a href="#qa">Domande e Risposte</a></li>
        </ul>
        <a href="{% url 'tasks:home' %}" class="btn-admin">🏠 Torna alla Home</a>
    </section>

    <section class="guida-blocco" id="tour">
        <h3>🎯 Ripeti il tour interattivo</h3>
        <p>Hai bisogno di un ripasso? Clicca qui sotto per rivedere il tour guidato dell'app!</p>
        <a href="{% url 'tasks:home' %}?tour=1" class="btn-admin">🔄 Avvia il tour</a>
        <ul>
            <li>📋 Crea le tue liste di attività in pochi tap</li>
            <li>📌 Organizza le attività per priorità e scadenza</li>
            <li>🔔 Ricevi promemoria intelligenti</li>
            <li>🗂 Personalizza e filtra come preferisci</li>
        </ul>
        <p>➡ <a href="#comeusarla">Approfondisci nella sezione "Come usarla"</a></p>
    </section>

    <section class="guida-blocco" id="cosetodo">
        <h3>💎 Cos'è ToDo</h3>
        <p>ToDo è la tua assistente digitale per l'organizzazione personale. Con un'interfaccia semplice e intuitiva, ti aiuta a gestire attività, scadenze e obiettivi. Tutto è pensato per essere accessibile ovunque, con il massimo controllo e senza stress.</p>
        <p><strong>Perché usare ToDo?</strong><br>Con ToDo puoi tenere traccia di tutto ciò che devi fare: dal lavoro quotidiano alla lista della spesa, dai progetti importanti ai promemoria personali.</p>
        <p><strong>Esempi d'uso:</strong></p>
        <ul>
            <li>🛒 Lista spesa settimanale</li>
            <li>📚 Organizzare i compiti scolastici</li>
            <li>📆 Pianificare eventi o appuntamenti</li>
            <li>🧘 Attività quotidiane personali o di benessere</li>
        </ul>
    </section>

    <section class="guida-blocco" id="comeusarla">
        <h3>🚀 Come usare tutte le funzionalità al meglio</h3>

        <h4>📝 Aggiungere e gestire attività</h4>
        <ul>
            <li>Tocca il pulsante <strong>+</strong> in basso</li>
            <li>Scrivi un titolo chiaro (es. "Inviare fattura")</li>
            <li>Imposta una priorità e una scadenza</li>
            <li>Salva!</li>
        </ul>
        <div class="guida-tip">💡 <strong>Consiglio:</strong> usa titoli con verbi per trovarli meglio (es. "Studiare matematica")</div>

        <h4>📅 Usare il calendario</h4>
        <p>La vista calendario ti mostra tutte le attività distribuite nel mese. Colori diversi ti aiutano a distinguere le priorità. Clicca su un'attività per modificarla rapidamente.</p>

        <h4>⏰ Impostare promemoria</h4>
        <p>Quando crei un'attività, puoi ricevere notifiche all'orario che preferisci. Ricorda di autorizzare le notifiche sul dispositivo!</p>
        <div class="guida-tip">🔔 <strong>Nota:</strong> puoi impostare notifiche giornaliere anche per attività ricorrenti.</div>

        <h4>✅ Completare e riaprire attività</h4>
        <p>Cliccando sulla spunta puoi segnare l'attività come completata. Se cambi idea, puoi ripristinarla in ogni momento.</p>

        <h4>🧠 Consigli utili</h4>
        <ul>
            <li>Filtra per priorità se hai troppi task</li>
            <li>Usa la ricerca per trovare rapidamente vecchie attività</li>
            <li>Controlla ogni mattina la scadenza giornaliera</li>
        </ul>
    </section>

    <section class="guida-blocco" id="calendario">
        <h3>📅 Il potere del calendario</h3>
        <p>Il calendario integrato mostra tutti i tuoi task in formato mensile. I colori indicano la priorità. Clicca su ogni evento per modificarlo al volo.</p>
    </section>

    <section class="guida-blocco" id="funzioni">
        <h3>🛠 Funzionalità principali</h3>
        <ul>
            <li><strong>Nuova attività</strong>: Inserisci titolo, scadenza, priorità e salva</li>
            <li><strong>Filtri</strong>: Visualizza solo attività completate, da fare o urgenti</li>
            <li><strong>Modifica</strong>: Cambia attività in ogni momento</li>
            <li><strong>Profilo</strong>: Gestisci i tuoi dati personali</li>
        </ul>
    </section>

    <section class="guida-blocco" id="sicurezza">
        <h3>🔐 Sicurezza dei dati</h3>
        <p>Solo tu puoi vedere e gestire le tue attività. Ogni azione è protetta dal login e i dati sono associati al tuo account personale.</p>
    </section>

    <section class="guida-blocco" id="dispositivi">
        <h3>📱 Accessibilità ovunque</h3>
        <p>ToDo funziona su tutti i dispositivi connessi a internet. Nessuna app da installare: ti basta un browser!</p>
    </section>

    <section class="guida-blocco" id="supporto">
        <h3>📬 Supporto</h3>
        <p>Dubbi o problemi? Scrivici a <a href="mailto:support@todoapp.dev">support@todoapp.dev</a></p>
    </section>

    <section class="guida-blocco" id="profilo">
        <h3>🧱 Gestione del profilo</h3>
        <p>Dal menu utente accedi alla sezione <strong>Profilo</strong>, dove puoi:</p>
        <ul>
            <li>📷 Cambiare il tuo avatar</li>
            <li>👤 Aggiornare nome e email</li>
            <li>🔌 Impostare il tuo stato: Online, Offline o Non disturbare</li>
        </ul>
        <p>Lo stato verrà mostrato agli amici nell'area online.</p>
    </section>

    <section class="guida-blocco" id="online">
        <h3>🔵 Area Online e Amicizie</h3>
        <p>Nella sezione <strong>Online</strong>, puoi cercare altri utenti per creare una rete di amicizie:</p>
        <ul>
            <li>👥 Cerca un utente dalla barra di ricerca</li>
            <li>✉ Invia una richiesta di amicizia</li>
            <li>✔ Accetta o rifiuta le richieste ricevute</li>
            <li>⏺ Visualizza lo stato (Online/Offline/Non disturbare)</li>
        </ul>
        <p>Presto potrai condividere task direttamente con i tuoi amici!</p>
    </section>

    <section class="guida-blocco" id="team">
        <h3>👥 Team e collaborazione</h3>
        <p>Vuoi lavorare in gruppo? Puoi creare un team e invitare altri utenti:</p>
        <ul>
            <li>🌐 Crea un team dalla sezione <strong>Team</strong></li>
            <li>➕ Invita persone nel tuo team</li>
            <li>✅ I membri possono creare, modificare e completare task</li>
        </ul>
        <p>Ogni membro ha visione completa delle attività del team.</p>
    </section>

    <section class="guida-blocco" id="adminteam">
        <h3>📊 Dashboard Admin del Team</h3>
        <p>Come <strong>Admin di un team</strong>, hai funzionalità avanzate:</p>
        <ul>
            <li>🔄 Visualizza dashboard e grafici di sintesi</li>
            <li>❌ Rimuovi membri se necessario</li>
            <li>📊 Monitora l'attività generale del gruppo</li>
        </ul>
        <p>Le dashboard admin ti aiutano a gestire meglio i progetti collaborativi.</p>
    </section>

    <section class="guida-blocco" id="prossime">
        <h3>🧱 Prossime funzionalità</h3>
        <ul>
            <li>Task condivisi con amici/colleghi</li>
            <li>Notifiche tra amici (es. richieste accettate, messaggi)</li>
            <li>Tag e categorie personalizzabili</li>
            <li>Temi grafici e modalità notturna</li>
            <li>Esportazione e backup</li>
        </ul>
    </section>

    <section class="guida-blocco" id="qa">
        <h3>❔ Domande & Risposte</h3>
        <details>
            <summary><strong>Come faccio a vedere se un amico è online?</strong></summary>
            <p>Vai nella sezione <strong>Online</strong>: ogni utente ha un'icona accanto al nome che indica lo stato (verde = online, rosso = non disturbare, grigio = offline).</p>
        </details>
        <details>
            <summary><strong>Chi può creare un team?</strong></summary>
            <p>Chiunque! Appena crei un team, diventi automaticamente Admin e puoi invitare altri utenti.</p>
        </details>
        <details>
            <summary><strong>Un membro può eliminare i task del team?</strong></summary>
            <p>Sì, i membri possono creare, modificare e completare i task del team, ma solo l'admin può gestire i membri o eliminare l'intero team.</p>
        </details>
        <details>
            <summary><strong>Posso cambiare stato da "non disturbare" a "online"?</strong></summary>
            <p>Sì, basta andare nel tuo <strong>Profilo</strong> e selezionare lo stato desiderato.</p>
        </details>
        <details>
            <summary><strong>Se rifiuto una richiesta di amicizia, l'altro utente lo sa?</strong></summary>
            <p>No, non riceverà alcuna notifica. Semplicemente la richiesta verrà rimossa dalla tua lista.</p>
        </details>
    </section>

</div>
{% endblock %}

{% block scripts %}
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/shepherd.js@8.3.1/dist/css/shepherd.css" />
    <script src="https://cdn.jsdelivr.net/npm/shepherd.js@8.3.1/dist/js/shepherd.min.js"></script>
    <script src="{% static 'js/tour.js' %}"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        #scrollTopBtn {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 99;
            font-size: 18px;
            border: none;
            outline: none;
            background-color: #007bff;
            color: white;
            cursor: pointer;
            padding: 14px;
            border-radius: 50%;
            box-shadow: 0 2px 6px rgba(0,0,0,0.2);
            display: none;
            transition: opacity 0.3s ease;
        }
        #scrollTopBtn:hover {
            background-color: #0056b3;
        }
        #scrollTopBtn i {
            width: 20px;
            height: 20px;
        }
    </style>
    <script>
        // Scroll morbido per indice
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener("click", function (e) {
                e.preventDefault();
                document.querySelector(this.getAttribute("href")).scrollIntoView({
                    behavior: "smooth"
                });
            });
        });

        // Bottone scroll top
        const scrollBtn = document.getElementById("scrollTopBtn");
        scrollBtn.addEventListener("click", () => {
            window.scrollTo({ top: 0, behavior: "smooth" });
        });
        window.onscroll = () => {
            if (document.body.scrollTop > 300 || document.documentElement.scrollTop > 300) {
                scrollBtn.style.display = "block";
                scrollBtn.style.opacity = 1;
            } else {
                scrollBtn.style.opacity = 0;
                scrollBtn.style.display = "none";
            }
        };

        // Inizializza le icone Lucide
        lucide?.createIcons?.();
    </script>
{% endblock %}
